<%- include("partials/header") %>
<%- include("partials/navbar") %>
<div class="d-flex justify-content-end">
    <a href="/finance/new" class="btn btn-primary mt-3 mb-3"><i class="bi bi-plus-lg me-3"></i>Nova receita</a>
</div>
<table class="table table-hover">
    <thead>
    <tr>
        <th scope="col">Id</th>
        <th scope="col">Tipo</th>
        <th scope="col">Valor</th>
        <th scope="col">Data</th>
        <th scope="col"></th>
        <th scope="col"></th>
    </tr>
    </thead>
    <tbody>
        <% financas.forEach((financa)=>{ %>
          <tr>
            <td><%= financa.id %></td>
            <td><%= financa.tipo %></td>
            <td><%= financa.valor, " R$" %></td>
            <td>
                <% 
                  const dataObj = new Date(financa.data); 
                  const dia = String(dataObj.getDate()).padStart(2, '0');
                  const mes = String(dataObj.getMonth() + 1).padStart(2, '0');
                  const ano = dataObj.getFullYear();
                  const dataFormatada = `${dia}/${mes}/${ano}`;
                %>
                <%= dataFormatada %>
              </td>
            <th scope="col"><a href=<%= `/finance/${financa.id}/update` %> class="link-secondary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover">Editar</a>
            </th>
                <th scope="col"><a class="delete-link link-danger link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover" href=<%= `/financas/${financa.id}/delete` %>>Excluir</a>
            </th>
          </tr>
        <% })%>
    </tbody>
</table>
<%- include("partials/footer") %>